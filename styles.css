*{margin:0;padding:0;box-sizing:border-box}

:root{
  --bg:#efe9df;
  --ink:#1f1f1f;

  /* Ajuste fino del sello (si no coincide perfecto con tu imagen) */
  --seal-x: 50%;   /* izquierda-derecha */
  --seal-y: 49%;   /* arriba-abajo */
  --seal-size: 110px;

  --wax:#6b0f1a;   /* vino */
  --wax-deep:#4e0b13;
  --wax-hi: rgba(255,255,255,0.16);
}

body{
  background:var(--bg);
  font-family:'Cormorant Garamond', serif;
  height:100vh;
  overflow:hidden;
  color:var(--ink);
}

/* INTRO */
.intro{
  position:fixed;
  inset:0;
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  background:var(--bg);
  transition:opacity .85s ease;
  opacity:1;
  z-index:999;
}
.intro.fade{opacity:0;pointer-events:none}

.envelope-stage{
  position:relative;
  width:min(520px, 92vw);
  cursor:pointer;
  user-select:none;
  -webkit-tap-highlight-color: transparent;
}

.envelope-img{
  width:100%;
  display:block;
  border-radius:10px;
  box-shadow:0 26px 70px rgba(0,0,0,0.16);
}

/* Microcopy */
.microcopy{
  margin-top:20px;
  font-size:15px;
  letter-spacing:1px;
  color:#555;
}

/* CARTA */
.letter{
  position:absolute;
  left:12%;
  width:76%;
  top:58%;
  background:#fff;
  border-radius:6px;
  padding:20px 18px;
  text-align:center;
  box-shadow:0 14px 40px rgba(0,0,0,0.12);
  transform:translateY(55px);
  transition:transform .85s ease;
  opacity:1;
}
.letter h1{font-weight:500;font-size:24px;margin-bottom:8px}
.letter p{font-size:16px;color:#333}

/* SOLAPA (solo “sombra/volumen” al abrir; la foto ya la tiene) */
.flap{
  position:absolute;
  left:0; top:0;
  width:100%;
  height:50%;
  transform-origin:top;
  transition:transform .85s ease;
  pointer-events:none;

  /* sutil sombra para dar sensación de movimiento al abrir */
  background:linear-gradient(to bottom, rgba(0,0,0,0.10), rgba(0,0,0,0.00));
  opacity:0;
}

/* SELLO DE CERA (superpuesto) */
.wax{
  position:absolute;
  left:var(--seal-x);
  top:var(--seal-y);
  width:var(--seal-size);
  height:var(--seal-size);
  transform:translate(-50%, -50%);
  pointer-events:none;
  z-index:6;

  filter: drop-shadow(0 10px 18px rgba(0,0,0,0.20));
}

/* Dos mitades (se quedan pegadas, separación mínima) */
.wax-half{
  position:absolute;
  inset:0;
  border-radius:50%;
  background:
    radial-gradient(circle at 30% 25%, var(--wax-hi), transparent 45%),
    radial-gradient(circle at 70% 75%, rgba(0,0,0,0.18), transparent 55%),
    linear-gradient(145deg, var(--wax), var(--wax-deep));
  box-shadow:
    inset 0 1px 0 rgba(255,255,255,0.14),
    inset 0 -10px 18px rgba(0,0,0,0.18);
}

/* Bordes irregulares (simula cera real) */
.wax-half::before{
  content:"";
  position:absolute;
  inset:-6px;
  border-radius:50%;
  background:
    radial-gradient(circle at 12% 22%, rgba(255,255,255,0.08), transparent 30%),
    radial-gradient(circle at 78% 18%, rgba(255,255,255,0.08), transparent 35%),
    radial-gradient(circle at 25% 80%, rgba(0,0,0,0.10), transparent 40%);
  filter: blur(1px);
  opacity:0.9;
}

/* Clips para dividir en 2 */
.wax-left{ clip-path: polygon(0 0, 55% 0, 48% 100%, 0 100%); transform:translateX(0); }
.wax-right{ clip-path: polygon(55% 0, 100% 0, 100% 100%, 48% 100%); transform:translateX(0); }

/* Monograma */
.wax-monogram{
  position:absolute;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:42px;
  letter-spacing:1px;
  color:rgba(255,255,255,0.78);
  text-shadow: 0 2px 0 rgba(0,0,0,0.15);
  transform:translateY(-1px);
  font-weight:500;
  z-index:3;
}

/* Grieta (oculta hasta “crack”) */
.wax-crack{
  position:absolute;
  inset:16px;
  z-index:4;
  opacity:0;
  transform:scale(0.98);
  transition:opacity .18s ease;
}

/* Miguitas */
.crumb{
  position:absolute;
  width:6px; height:6px;
  border-radius:50%;
  background:linear-gradient(145deg, var(--wax), var(--wax-deep));
  opacity:0;
  z-index:5;
}
.c1{ left:18%; top:82%; }
.c2{ left:38%; top:92%; width:5px; height:5px; }
.c3{ left:64%; top:90%; width:4px; height:4px; }
.c4{ left:78%; top:78%; width:5px; height:5px; }

/* ESTADOS */
.crack .wax-crack{ opacity:1; }

.split .wax-left{ transform:translateX(-3px) rotate(-1deg); }
.split .wax-right{ transform:translateX(3px) rotate(1deg); }

.split .crumb{
  opacity:1;
  animation: crumb 520ms ease forwards;
}
.split .c1{ animation-delay: 40ms; }
.split .c2{ animation-delay: 90ms; }
.split .c3{ animation-delay: 120ms; }
.split .c4{ animation-delay: 70ms; }

@keyframes crumb{
  0%{ transform:translateY(0) scale(0.9); opacity:0; }
  20%{ opacity:1; }
  100%{ transform:translateY(6px) scale(1); opacity:0; }
}

/* Abrir sobre */
.open .flap{
  opacity:1;
  transform:rotateX(-160deg);
}
.open .letter{
  transform:translateY(-135px);
}

/* MAIN */
.main{
  opacity:0;
  transition:opacity 1s ease;
  padding:40px 18px;
  max-width:900px;
  margin:0 auto;
}
.main.show{opacity:1}
